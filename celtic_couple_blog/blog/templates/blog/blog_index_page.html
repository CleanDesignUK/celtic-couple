{% extends "base.html" %}
{% load static wagtailimages_tags wagtailcore_tags %}

{% block title %}Blog - The Celtic Couple{% endblock %}
{% block meta_description %}Read the latest posts from The Celtic Couple's travel blog, celebrating Celtic heritage and adventures.{% endblock %}
{% block meta_keywords %}Blog, Celtic, Travel, Heritage, Adventures{% endblock %}

{% block content %}
<link rel="stylesheet" href="{% static 'css/blog.css' %}">
<style>
    /* ---------------------------------- */
/* Import a clean, modern typeface    */
/* ---------------------------------- */

@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;700&display=swap');

html {
    scroll-behavior: smooth;
}

body {
    font-family: 'Montserrat', sans-serif;
    color: #333;
    background-color: #F8F9FA;
    margin: 0;
    padding: 0;
}

/* ---------------------------------- */
/* Hero Section                       */
/* ---------------------------------- */

#blog-hero {
    position: relative;
    background-image: url('/static/images/hero-background.jpg'); /* Or replace with your chosen hero image */
    background-size: cover;
    background-position: center;
    color: #fff;
    padding: 6rem 0; /* Increase top and bottom padding for more impact */
}

#blog-hero::before {
    content: "";
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.4); /* Subtle overlay to enhance text contrast */
    z-index: 0;
}

#blog-hero .container {
    position: relative;
    z-index: 1;
    text-align: center;
}

#blog-hero h1 {
    font-size: 3.5rem;
    font-weight: 700;
    margin-bottom: 1.5rem;
    text-shadow: 2px 2px 6px rgba(0, 0, 0, 0.4);
}

#blog-hero p.lead {
    font-size: 1.2rem;
    max-width: 800px;
    margin: 0 auto 1.5rem;
    line-height: 1.6;
}

/* ---------------------------------- */
/* Section Headings                   */
/* ---------------------------------- */

section h2 {
    font-size: 2.2rem;
    font-weight: 700;
    margin-bottom: 2rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    position: relative;
    display: inline-block;
}

section h2::after {
    content: "";
    display: block;
    width: 60px;
    height: 3px;
    background-color: #FF0000;
    margin: 0.5rem auto 0;
    border-radius: 3px;
}

/* ---------------------------------- */
/* Blog Cards / Posts                 */
/* ---------------------------------- */

.professional-card {
    background-color: #fff;
    border: none;
    border-radius: 0.25rem;
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    height: 100%;
    display: flex;
    flex-direction: column;
}

.professional-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.12);
}

.professional-card .card-img-top {
    height: 220px;
    object-fit: cover;
    transition: transform 0.3s ease;
}

.professional-card:hover .card-img-top {
    transform: scale(1.02);
}

/* Card Body */
.professional-card .card-body {
    flex: 1 1 auto;
    padding: 1.25rem;
}

/* Card Title */
.card-title a {
    color: #000;
    font-weight: 700;
    font-size: 1.1rem;
    text-decoration: none;
    transition: color 0.3s ease, border-bottom 0.3s ease;
    border-bottom: 2px solid transparent;
}

.card-title a:hover {
    color: #FF0000;
    border-bottom: 2px solid #FF0000;
    text-decoration: none;
}

/* Card Text */
.card-text {
    color: #555;
    font-size: 1rem;
    margin-top: 0.75rem;
    line-height: 1.6;
    flex: 1 1 auto;
}

/* Read More Button */
.btn-outline-danger {
    border-color: #FF0000;
    color: #FF0000;
    transition: all 0.3s ease;
    font-weight: 500;
}

.btn-outline-danger:hover {
    background-color: #FF0000;
    color: #fff;
}

/* ---------------------------------- */
/* Card Footer                        */
/* ---------------------------------- */

.card-footer {
    background-color: #fff;
    border-top: none;
    font-size: 0.9rem;
    color: #999;
}

.card-footer .social-share a {
    font-size: 1rem;
    margin-right: 8px;
    color: #999;
    transition: color 0.3s ease;
}

.card-footer .social-share a:hover {
    color: #FF0000;
}

/* ---------------------------------- */
/* Pagination                         */
/* ---------------------------------- */

.pagination .page-link {
    color: #333;
    border: 1px solid #DDD;
    transition: background-color 0.3s ease, color 0.3s ease;
}

.pagination .page-item.active .page-link {
    background-color: #FF0000;
    border-color: #FF0000;
    color: #fff;
}

.pagination .page-link:hover {
    background-color: #FFCCCC;
    color: #000;
}

/* ---------------------------------- */
/* Responsive Adjustments             */
/* ---------------------------------- */

@media (max-width: 992px) {
    #blog-hero h1 {
        font-size: 3rem;
    }
}

@media (max-width: 768px) {
    #blog-hero h1 {
        font-size: 2.3rem;
    }

    .professional-card .card-img-top {
        height: 180px;
    }

    .card-text {
        font-size: 0.95rem;
    }

    .pagination .page-link {
        padding: 0.5rem 0.75rem;
    }
}

</style>
<!-- Hero Section -->
<section id="blog-hero" class="text-white">
    <div class="container">
        <h1 class=" text-center">Welcome to Our Journey</h1>
        <p class="lead">
            Come along on our journey as we embrace a life filled with adventure and discovery! From walking and cycling through breathtaking countryside to exploring Europe's hidden gems and Scotland's magical islands—like the Outer Hebrides, Orkney, and Shetland—our beloved Volkswagen campervan is always ready for the next chapter.
        </p>
        <p class="lead font-italic">
            <strong>Join us, Dave and Georgina Roberts x</strong>
        </p>
    </div>
</section>

<!-- Blog Posts Section -->
<section id="blog" class="py-5 bg-light">
    <div class="container">
        <h2 class="text-center">Our Latest Posts</h2>
        <div class="row">
            {% for post in posts %}
                <div class="col-md-6 col-lg-4 mb-4 d-flex align-items-stretch">
                    <div class="card professional-card">
                        <!-- Featured Image -->
                        {% if post.gallery_images.first %}
                            <a href="{% pageurl post %}">
                                {% image post.gallery_images.first.image fill-800x600 as rendition %}
                                <img src="{{ rendition.url }}" class="card-img-top" alt="{{ post.title }}" loading="lazy">
                            </a>
                        {% elif post.image %}
                            <a href="{% pageurl post %}">
                                <img src="{{ post.image.url }}" class="card-img-top" alt="{{ post.title }}" loading="lazy">
                            </a>
                        {% else %}
                            <a href="{% pageurl post %}">
                                <img src="{% static 'images/default-blog-image.jpg' %}" class="card-img-top" alt="Default Image" loading="lazy">
                            </a>
                        {% endif %}

                        <!-- Card Body -->
                        <div class="card-body d-flex flex-column">
                            <h5 class="card-title">
                                <a href="{% pageurl post %}">{{ post.title }}</a>
                            </h5>
                            <p class="card-text">
                                {{ post.intro|truncatechars:150 }}
                            </p>
                            <a href="{% pageurl post %}" class="btn btn-outline-danger mt-auto">
                                Read More <i class="bi bi-arrow-right"></i>
                            </a>
                        </div>

                        <!-- Card Footer -->
                        <div class="card-footer text-muted d-flex flex-column">
                            <span>
                                Posted by 
                                {% if post.author %}
                                    {{ post.author.name }}
                                {% else %}
                                    Unknown
                                {% endif %}
                                on {{ post.date|date:"F d, Y" }}
                            </span>
                            <div class="social-share mt-2">
                                <a href="https://facebook.com/sharer/sharer.php?u={{ request.build_absolute_uri }}" target="_blank" aria-label="Share on Facebook">
                                    <i class="bi bi-facebook"></i>
                                </a>
                                <a href="https://twitter.com/intent/tweet?url={{ request.build_absolute_uri }}&text={{ post.title }}" target="_blank" aria-label="Share on Twitter">
                                    <i class="bi bi-twitter"></i>
                                </a>
                                <a href="https://instagram.com/" target="_blank" aria-label="Share on Instagram">
                                    <i class="bi bi-instagram"></i>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="col-12">
                    <p class="text-center">No blog posts available.</p>
                </div>
            {% endfor %}
        </div>
        
        <!-- Pagination -->
        {% if is_paginated %}
            <nav aria-label="Blog Pagination">
                <ul class="pagination justify-content-center">
                    {% if page_obj.has_previous %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.previous_page_number }}" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link" aria-label="Previous">
                                <span aria-hidden="true">&laquo;</span>
                                <span class="sr-only">Previous</span>
                            </span>
                        </li>
                    {% endif %}
                    
                    {% for num in paginator.page_range %}
                        {% if page_obj.number == num %}
                            <li class="page-item active"><span class="page-link">{{ num }}</span></li>
                        {% elif num > page_obj.number|add:'-3' and num < page_obj.number|add:'3' %}
                            <li class="page-item"><a class="page-link" href="?page={{ num }}">{{ num }}</a></li>
                        {% endif %}
                    {% endfor %}
                    
                    {% if page_obj.has_next %}
                        <li class="page-item">
                            <a class="page-link" href="?page={{ page_obj.next_page_number }}" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">Next</span>
                            </a>
                        </li>
                    {% else %}
                        <li class="page-item disabled">
                            <span class="page-link" aria-label="Next">
                                <span aria-hidden="true">&raquo;</span>
                                <span class="sr-only">Next</span>
                            </span>
                        </li>
                    {% endif %}
                </ul>
            </nav>
        {% endif %}
    </div>
</section>
{% endblock %}
